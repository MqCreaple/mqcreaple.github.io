---
title: Markov算法的图灵完备性证明
layout: blog
tags: ["computer", "algorithm", "programming"]
---

最近玩了Steam上的一个叫[A=B](https://store.steampowered.com/app/1720850/AB/)的编程游戏。游戏的规则很简单：你需要使用一个非常简易的编程语言来完成一系列任务。游戏流程和OI里的代码评测完全一样，唯一区别就是使用的编程语言。

这个名叫`A=B`的编程语言基于简单的字符串操作，一共只有如下几条语法规则：

1. 代码由许多行构成，每一行的格式都是如下几种之一：
    - `A=B`，其中`A`和`B`均为字符串：在字符串里寻找子串`A`第一次出现的位置，如果有则将其替换成子串`B`，如果没有则跳过该行指令。
    - `A=(return)B`：在输入字符串中寻找`A`是否出现，如果有则将`B`作为返回值并立即结束程序，如果没有则跳过。
    - `A=(start)B`和`A=(end)B`：在输入字符串中寻找`A`，如果有，则去掉`A`并在字符串的开头或末尾添加字符串`B`。
    - `(start)A=B`和`(end)A=B`：仅在输入字符串的开头或者结尾搜索是否出现`A`，如果有则将其替换成`B`。
    - `(start)A=(start)B`，`(start)A=(end)B`，`(end)A=(start)B`，`(end)A=(end)B`：类似。
    - `(once)A=B`：本条指令不能执行多次。
2. 每次运行程序时从上向下寻找第一条可以执行的指令并执行。如果没有可执行的指令，则将当前的字符串作为返回值并结束程序。

**以下内容包含剧透和题解，请谨慎阅读**

比如，下面的程序就可以将一个仅包含`a`, `b`, `c`的字符串的所有字母排序：

```a=b
ba=ab
ca=ac
cb=bc
```

样例输入：

```
abccba
```

样例输出：

```
aabbcc
```

这个语言也可以执行一些更复杂的操作，比如把字符串中的每一个`a`替换成`b`，每一个`b`替换成`a`：

```a=b
(once)=(start)X
Xa=bX
Xb=aX
Xc=cX
X=
```

样例输入：

```
abcabc
```

样例输出：

```
bacbac
```

上面这个程序的逻辑是：先在字符串开头添加一个`X`，然后让这个`X`像光标一样从左往右扫一遍字符串，并在扫描的过程中进行字符替换，最后扫到末尾没有更多字符的时候就把`X`删掉并且结束程序。

甚至这个语言能够在三行内做二进制计数：

```a=b
1=0a
a0=0aa
0=
```

样例输入：

```
101
```

样例输出：

```
aaaaa
```

读者可以思考一下这个算法为什么能够把二进制数转化成对应数量的`a`。

这个编程语言所执行的操作其实有一个更专业的名字：[**马尔可夫算法（Markov algorithm）**](https://en.wikipedia.org/wiki/Markov_algorithm)。在`A=B`游戏中，作者给出了一个`A=B`是图灵完备的证明，如下所示：

TODO
